# 优惠码种子数据

这个脚本用于向数据库中添加示例优惠码，用于测试优惠码功能。

## 运行脚本

```bash
cd backend
npm run seed:promo
```

## 示例优惠码列表

### 有效优惠码

| 优惠码 | 类型 | 折扣 | 最低消费 | 最大折扣 | 过期时间 | 使用限制 | 状态 |
|--------|------|------|----------|----------|----------|----------|------|
| WELCOME10 | 百分比 | 10% | $50 | $20 | 30天 | 100次 | 有效 |
| SAVE20 | 百分比 | 20% | $100 | $50 | 60天 | 50次 | 有效 |
| FREESHIP | 免运费 | 免费 | $75 | - | 90天 | 200次 | 有效 |
| FLAT15 | 固定金额 | $15 | $80 | - | 45天 | 75次 | 有效 |
| NEWUSER | 百分比 | 25% | $30 | $30 | 14天 | 1次 | 有效 |
| BULK30 | 百分比 | 30% | $200 | $100 | 120天 | 25次 | 有效 |
| WEEKEND | 固定金额 | $25 | $100 | - | 7天 | 150次 | 有效 |

### 测试用优惠码

| 优惠码 | 类型 | 折扣 | 最低消费 | 过期时间 | 使用限制 | 状态 | 说明 |
|--------|------|------|----------|----------|----------|------|------|
| EXPIRED | 百分比 | 50% | $0 | 已过期 | 10次 | 有效 | 用于测试过期优惠码 |
| INACTIVE | 百分比 | 15% | $50 | 30天 | 50次 | 无效 | 用于测试未激活优惠码 |
| LIMITED | 百分比 | 40% | $150 | 30天 | 5次(已用完) | 有效 | 用于测试使用限制 |

## 测试场景

### 1. 正常使用
- 使用 `WELCOME10` 在购物车满$50时获得10%折扣
- 使用 `FREESHIP` 在购物车满$75时免运费

### 2. 错误处理
- 使用 `EXPIRED` 测试过期优惠码提示
- 使用 `INACTIVE` 测试未激活优惠码提示
- 使用 `LIMITED` 测试使用次数限制提示
- 使用 `NEWUSER` 测试最低消费要求

### 3. 边界测试
- 测试购物车金额刚好达到最低消费要求
- 测试折扣金额超过最大折扣限制
- 测试购物车金额不足最低消费要求

## 注意事项

- 脚本会清空现有的所有优惠码数据
- 优惠码会自动转换为大写
- 过期时间基于当前时间计算
- 使用限制包括已使用的次数
